'''
"C0": 16.35,
"C#0": 17.32,
"Db0": 17.32,
"D0": 18.35,
"D#0": 19.45,
"Eb0": 19.45,
"E0": 20.60,
"F0": 21.83,
"F#0": 23.12,
"Gb0": 23.12,
"G0": 24.50
"G#0": 25.96
"Ab0": 25.96
"A0": 27.50
"A#0": 29.14
"Bb0": 29.14
"B0": 30.87
"C1": 32.70
"C#1": 34.65
"Db1": 34.65
"D1": 36.71
"D#1": 38.89
"Eb1": 38.89
"E1": 41.2
"F1": 43.65
"F#1": 46.25
"Gb1": 46.25
"G1": 49.00
"G#1": 51.91
"G#1/Ab1": 51.91
"A1": 55.00
A#1/Bb1  	58.27 	592.07
A#1/Bb1  	58.27 	592.07
B1	61.74 	558.84
C2	65.41 	527.47
C#2/Db2  	69.30 	497.87
C#2/Db2  	69.30 	497.87
D2	73.42 	469.92
D#2/Eb2  	77.78 	443.55
D#2/Eb2  	77.78 	443.55
E2	82.41 	418.65
F2	87.31 	395.16
F#2/Gb2  	92.50 	372.98
F#2/Gb2  	92.50 	372.98
G2	98.00 	352.04
G#2/Ab2  	103.83 	332.29
G#2/Ab2  	103.83 	332.29
A2	110.00 	313.64
A#2/Bb2  	116.54 	296.03
A#2/Bb2  	116.54 	296.03
B2	123.47 	279.42
C3	130.81 	263.74
C#3/Db3  	138.59 	248.93
C#3/Db3  	138.59 	248.93
D3	146.83 	234.96
D#3/Eb3  	155.56 	221.77
D#3/Eb3  	155.56 	221.77
E3	164.81 	209.33
F3	174.61 	197.58
F#3/Gb3  	185.00 	186.49
F#3/Gb3  	185.00 	186.49
G3	196.00 	176.02
G#3/Ab3  	207.65 	166.14
G#3/Ab3  	207.65 	166.14
A3	220.00 	156.82
A#3/Bb3  	233.08 	148.02
A#3/Bb3  	233.08 	148.02
B3	246.94 	139.71






'''

import sys
import subprocess

alphabet = {}

for i in range(0, 26):
    alphabet[i] = chr(i + 97)

interval = [i for i in range(0, 8)]

aton = {}

for i in alphabet.keys():
    aton[alphabet[i]] = interval[i % 8]

rhythms = {
    0.0625: 188,  # 1/16
    0.125: 375,  # 1/8
    0.1825: 563,  # 1/8 + 1/16
    0.25: 750,  # 1/4
    0.375: 1125,  # 1/4 + 1/8
    0.5: 1500,  # 1/2
    0.75: 2250,  # 3/4 (1/2 + 1/4)
    1: 3000,  # 1
}

rhythm_letters = {
    's': rhythms[0.0625],  # sixteenth
    'e': rhythms[0.125],  # eighth
    'de': rhythms[0.1825],  # dotted eighth
    'q': rhythms[0.25],  # quarter
    'dq': rhythms[0.375],  # dotted quarter
    'h': rhythms[0.5],  # half
    'dh': rhythms[0.75],  # dotted half
    'w': rhythms[1],  # whole
}

notes = {
    "C4": 261.63,
    "C#4": 277.18,
    "Db4": 277.18,
    "D4": 293.66,
    "D#4": 311.13,
    "Eb4": 311.13,
    "E4": 329.63,
    "F4": 349.23,
    "F#4": 369.99,
    "Gb4": 369.99,
    "G4": 392.00,
    "G#4": 415.30,
    "Ab4": 415.30,
    "A4": 440.00,
    "A#4": 466.16,
    "Bb4": 466.16,
    "B4": 493.88,
    "Cb5": 493.88,
    "B#4": 523.25,
    "C5": 523.25,
    "C#5": 554.37,
    "Db5": 554.37,
    "D5": 587.33,
    "D#5": 622.25,
    "Eb5": 622.25,
    "E5": 659.25,
    "Fb5": 659.25,
    "E#5": 698.46,
    "F5": 698.46,
    "F#5": 739.99,
    "Gb5": 739.99,
    "G5": 783.99,
    "G#5": 830.61,
    "Ab5": 830.61,
    "A5": 880.00,
    "A#5": 932.33,
    "Bb5": 932.33,
    "B5": 987.77,
    "C6": 1046.50,
    "C#6": 1108.73,
    "Db6": 1108.73,
    "D6": 1174.66,
    "D#6": 1244.51,
    "Eb6": 1244.51,
    "E6": 1318.51,
    "F6": 1396.91,
    "F#6": 1479.98,
    "Gb6": 1479.98,
    "G6": 1567.98,
    "G#6": 1661.22,
    "Ab6": 1661.22,
    "A6": 1760.00,
    "A#6": 1864.66,
    "Bb6": 1864.66,
    "B6": 1975.53,
    "C7": 2093.00,
    "C#7": 2217.46,
    "Db7": 2217.46,
    "D7": 2349.32,
    "D#7": 2489.02,
    "Eb7": 2489.02,
    "E7": 2637.02,
    "F7": 2793.83,
    "F#7": 2959.96,
    "Gb7": 2959.96,
    "G7": 3135.96,
    "G#7": 3322.44,
    "Ab7": 3322.44,
    "A7": 3520.00,
    "A#7": 3729.31,
    "Bb7": 3729.31,
    "B7": 3951.07,
    "C8": 4186.01,
    "C#8": 4434.92,
    "Db8": 4434.92,
    "D8": 4698.63,
    "D#8": 4978.03,
    "Eb8": 4978.03,
    "E8": 5274.04,
    "F8": 5587.65,
    "F#8": 5919.91,
    "Gb8": 5919.91,
    "G8": 6271.93,
    "G#8": 6644.88,
    "Ab8": 6644.88,
    "A8": 7040.00,
    "A#8": 7458.62,
    "Bb8": 7458.62,
    "B8": 7902.13,
}

key = 'Cm'
keys = {
    'C': ['C4', 'D4', 'E4', 'F4', 'G4', 'A5', 'B5', 'C5'],
    'Cm': ['C4', 'D4', 'Eb4', 'F4', 'G4', 'Ab5', 'Bb5', 'C5']
}

my_song = [('G6', 'q'), ('C7', 'q'), ('Ab7', 'dq'), ('G6', 'e'),
           ('F6', 'q'), ('D6', 'q'), ('Ab7', 'dq'), ('G6', 'e')]

sentence = sys.argv[1].lower()

translation = []
for c in sentence:
    if ord(c) < 97 or ord(c) > 122:
        continue
    translation.append((keys[key][aton[c]], 'q'))

print translation

song = []
for note in translation:
    freq = note[0]
    rhyth = note[1]
    song.append(str(notes[freq]))
    song.append(str(rhythm_letters[rhyth]))


print ', '.join(song)
cmd = "chuck play:" + ":".join(song)
print cmd
proc = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE,
                        stderr=subprocess.STDOUT, universal_newlines=True)
output = proc.communicate()
retcode = proc.poll()

'''
20: -> 4
8: -> 1
15: -> 7
19: -> 3
5: -> 5
23: -> 7
8: -> 1
15: -> 7
4: -> 4
1: -> 1
14: -> 6
3: -> 3
5: -> 5
1: -> 1
18: -> 2
5: -> 5
3: -> 3
15: -> 7
14: -> 6
19: -> 3
9: -> 1
4:
5:
18: -> 2
5:
4:
9: -> 1
14: -> 6
19: -> 3
1: -> 1
14: -> 6
5: -> 5
2:
25: -> 1
20: -> 4
8: -> 8

15: -> 7
19: -> 3
5: -> 5
23: -> 7

8: -> 8
15: -> 7
3: -> 3
1: -> 1

14: -> 6
20: -> 4
8: -> 8
5: -> 5

1: -> 1
18: -> 2
20: -> 4
8: -> 8

5: -> 5
13: -> 5
21: -> 5
19: -> 3

9: -> 1
3 -> 3

'''
